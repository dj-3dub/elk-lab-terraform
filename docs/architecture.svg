<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: elk_lab Pages: 1 -->
<svg width="1110pt" height="401pt"
 viewBox="0.00 0.00 1110.09 401.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 397)">
<title>elk_lab</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-397 1106.09,-397 1106.09,4 -4,4"/>
<g id="clust1" class="cluster">
<title>cluster_host</title>
<path fill="none" stroke="#d0d7de" d="M245.09,-8C245.09,-8 1082.09,-8 1082.09,-8 1088.09,-8 1094.09,-14 1094.09,-20 1094.09,-20 1094.09,-373 1094.09,-373 1094.09,-379 1088.09,-385 1082.09,-385 1082.09,-385 245.09,-385 245.09,-385 239.09,-385 233.09,-379 233.09,-373 233.09,-373 233.09,-20 233.09,-20 233.09,-14 239.09,-8 245.09,-8"/>
<text text-anchor="middle" x="663.59" y="-369.8" font-family="Inter,Helvetica,Arial" font-size="14.00">Debian VM (Docker host)</text>
</g>
<g id="clust2" class="cluster">
<title>cluster_net</title>
<path fill="none" stroke="#e5e7eb" d="M253.09,-16C253.09,-16 1074.09,-16 1074.09,-16 1080.09,-16 1086.09,-22 1086.09,-28 1086.09,-28 1086.09,-193 1086.09,-193 1086.09,-199 1080.09,-205 1074.09,-205 1074.09,-205 253.09,-205 253.09,-205 247.09,-205 241.09,-199 241.09,-193 241.09,-193 241.09,-28 241.09,-28 241.09,-22 247.09,-16 253.09,-16"/>
<text text-anchor="middle" x="663.59" y="-189.8" font-family="Inter,Helvetica,Arial" font-size="14.00">Docker network: &lt;project&gt;&#45;net</text>
</g>
<!-- user -->
<g id="node1" class="node">
<title>user</title>
<ellipse fill="#e6f7ff" stroke="black" cx="63.04" cy="-38" rx="63.09" ry="18"/>
<text text-anchor="middle" x="63.04" y="-34.3" font-family="Inter,Helvetica,Arial" font-size="14.00">User browser</text>
</g>
<!-- kibana -->
<g id="node3" class="node">
<title>kibana</title>
<path fill="#f8f9fb" stroke="black" d="M746.59,-62C746.59,-62 627.59,-62 627.59,-62 621.59,-62 615.59,-56 615.59,-50 615.59,-50 615.59,-36 615.59,-36 615.59,-30 621.59,-24 627.59,-24 627.59,-24 746.59,-24 746.59,-24 752.59,-24 758.59,-30 758.59,-36 758.59,-36 758.59,-50 758.59,-50 758.59,-56 752.59,-62 746.59,-62"/>
<text text-anchor="middle" x="687.09" y="-46.8" font-family="Inter,Helvetica,Arial" font-size="14.00">Kibana (5601)</text>
<text text-anchor="middle" x="687.09" y="-31.8" font-family="Inter,Helvetica,Arial" font-size="14.00">Mounted: kibana.yml</text>
</g>
<!-- user&#45;&gt;kibana -->
<g id="edge7" class="edge">
<title>user&#45;&gt;kibana</title>
<path fill="none" stroke="#9aa0a6" stroke-dasharray="5,2" d="M125.45,-34.85C157.52,-33.35 197.41,-31.74 233.09,-31 326.4,-29.07 349.78,-28.7 443.09,-31 497.18,-32.33 557.98,-35.34 605.24,-38.01"/>
<polygon fill="#9aa0a6" stroke="#9aa0a6" points="605.23,-41.51 615.41,-38.59 605.63,-34.52 605.23,-41.51"/>
<text text-anchor="middle" x="346.09" y="-34.8" font-family="Inter,Helvetica,Arial" font-size="14.00">HTTP 5601 (direct)</text>
</g>
<!-- caddy -->
<g id="node7" class="node">
<title>caddy</title>
<path fill="#f8f9fb" stroke="black" d="M431.09,-93C431.09,-93 261.09,-93 261.09,-93 255.09,-93 249.09,-87 249.09,-81 249.09,-81 249.09,-67 249.09,-67 249.09,-61 255.09,-55 261.09,-55 261.09,-55 431.09,-55 431.09,-55 437.09,-55 443.09,-61 443.09,-67 443.09,-67 443.09,-81 443.09,-81 443.09,-87 437.09,-93 431.09,-93"/>
<text text-anchor="middle" x="346.09" y="-77.8" font-family="Inter,Helvetica,Arial" font-size="14.00">Caddy (optional)</text>
<text text-anchor="middle" x="346.09" y="-62.8" font-family="Inter,Helvetica,Arial" font-size="14.00">(no 80/443 publish by default)</text>
</g>
<!-- user&#45;&gt;caddy -->
<g id="edge5" class="edge">
<title>user&#45;&gt;caddy</title>
<path fill="none" stroke="black" d="M120.92,-45.29C154.78,-49.62 198.83,-55.26 238.91,-60.4"/>
<polygon fill="black" stroke="black" points="238.64,-63.89 249,-61.69 239.53,-56.95 238.64,-63.89"/>
<text text-anchor="middle" x="184.59" y="-61.8" font-family="Inter,Helvetica,Arial" font-size="14.00">HTTP 80/443</text>
</g>
<!-- es -->
<g id="node2" class="node">
<title>es</title>
<path fill="#f8f9fb" stroke="black" d="M1066.09,-118C1066.09,-118 950.09,-118 950.09,-118 944.09,-118 938.09,-112 938.09,-106 938.09,-106 938.09,-92 938.09,-92 938.09,-86 944.09,-80 950.09,-80 950.09,-80 1066.09,-80 1066.09,-80 1072.09,-80 1078.09,-86 1078.09,-92 1078.09,-92 1078.09,-106 1078.09,-106 1078.09,-112 1072.09,-118 1066.09,-118"/>
<text text-anchor="middle" x="1008.09" y="-102.8" font-family="Inter,Helvetica,Arial" font-size="14.00">Elasticsearch (9200)</text>
<text text-anchor="middle" x="1008.09" y="-87.8" font-family="Inter,Helvetica,Arial" font-size="14.00">Volume: es&#45;data</text>
</g>
<!-- kibana&#45;&gt;es -->
<g id="edge4" class="edge">
<title>kibana&#45;&gt;es</title>
<path fill="none" stroke="black" d="M758.71,-44.61C805.11,-46.91 866.85,-52.34 920.09,-65 931.92,-67.81 944.29,-71.9 955.86,-76.27"/>
<polygon fill="black" stroke="black" points="954.78,-79.6 965.36,-79.98 957.32,-73.08 954.78,-79.6"/>
<text text-anchor="middle" x="856.59" y="-83.8" font-family="Inter,Helvetica,Arial" font-size="14.00">HTTP 9200</text>
<text text-anchor="middle" x="856.59" y="-68.8" font-family="Inter,Helvetica,Arial" font-size="14.00">(kibana_system)</text>
</g>
<!-- logstash -->
<g id="node4" class="node">
<title>logstash</title>
<path fill="#f8f9fb" stroke="black" d="M747.59,-118C747.59,-118 626.59,-118 626.59,-118 620.59,-118 614.59,-112 614.59,-106 614.59,-106 614.59,-92 614.59,-92 614.59,-86 620.59,-80 626.59,-80 626.59,-80 747.59,-80 747.59,-80 753.59,-80 759.59,-86 759.59,-92 759.59,-92 759.59,-106 759.59,-106 759.59,-112 753.59,-118 747.59,-118"/>
<text text-anchor="middle" x="687.09" y="-102.8" font-family="Inter,Helvetica,Arial" font-size="14.00">Logstash (5044)</text>
<text text-anchor="middle" x="687.09" y="-87.8" font-family="Inter,Helvetica,Arial" font-size="14.00">nginx access pipeline</text>
</g>
<!-- logstash&#45;&gt;es -->
<g id="edge2" class="edge">
<title>logstash&#45;&gt;es</title>
<path fill="none" stroke="black" d="M759.68,-99C809.62,-99 876.29,-99 927.83,-99"/>
<polygon fill="black" stroke="black" points="927.93,-102.5 937.93,-99 927.93,-95.5 927.93,-102.5"/>
<text text-anchor="middle" x="856.59" y="-117.8" font-family="Inter,Helvetica,Arial" font-size="14.00">ingest pipeline</text>
<text text-anchor="middle" x="856.59" y="-102.8" font-family="Inter,Helvetica,Arial" font-size="14.00">nginx_access_enrich</text>
</g>
<!-- filebeat -->
<g id="node5" class="node">
<title>filebeat</title>
<path fill="#f8f9fb" stroke="black" d="M405.59,-174C405.59,-174 286.59,-174 286.59,-174 280.59,-174 274.59,-168 274.59,-162 274.59,-162 274.59,-148 274.59,-148 274.59,-142 280.59,-136 286.59,-136 286.59,-136 405.59,-136 405.59,-136 411.59,-136 417.59,-142 417.59,-148 417.59,-148 417.59,-162 417.59,-162 417.59,-168 411.59,-174 405.59,-174"/>
<text text-anchor="middle" x="346.09" y="-158.8" font-family="Inter,Helvetica,Arial" font-size="14.00">Filebeat</text>
<text text-anchor="middle" x="346.09" y="-143.8" font-family="Inter,Helvetica,Arial" font-size="14.00">container &amp; host logs</text>
</g>
<!-- filebeat&#45;&gt;logstash -->
<g id="edge1" class="edge">
<title>filebeat&#45;&gt;logstash</title>
<path fill="none" stroke="black" d="M417.76,-138.59C432.06,-135.53 447.03,-132.51 461.09,-130 508.35,-121.58 561.54,-114.15 604.34,-108.69"/>
<polygon fill="black" stroke="black" points="604.94,-112.14 614.42,-107.41 604.06,-105.19 604.94,-112.14"/>
<text text-anchor="middle" x="521.09" y="-133.8" font-family="Inter,Helvetica,Arial" font-size="14.00">beats:5044</text>
</g>
<!-- containers_dir -->
<g id="node8" class="node">
<title>containers_dir</title>
<polygon fill="#f8f9fb" stroke="black" points="775.09,-249 772.09,-253 751.09,-253 748.09,-249 599.09,-249 599.09,-213 775.09,-213 775.09,-249"/>
<text text-anchor="middle" x="687.09" y="-227.3" font-family="Inter,Helvetica,Arial" font-size="14.00">/var/lib/docker/containers/*</text>
</g>
<!-- filebeat&#45;&gt;containers_dir -->
<g id="edge8" class="edge">
<title>filebeat&#45;&gt;containers_dir</title>
<path fill="none" stroke="#9aa0a6" stroke-dasharray="1,5" d="M417.74,-170.84C469.45,-182.43 540.04,-198.26 595.83,-210.77"/>
<polygon fill="#9aa0a6" stroke="#9aa0a6" points="595.19,-214.21 605.72,-212.98 596.72,-207.38 595.19,-214.21"/>
<text text-anchor="middle" x="521.09" y="-209.8" font-family="Inter,Helvetica,Arial" font-size="14.00">bind ro</text>
</g>
<!-- docker_sock -->
<g id="node9" class="node">
<title>docker_sock</title>
<polygon fill="#f8f9fb" stroke="black" points="1076.59,-276 1073.59,-280 1052.59,-280 1049.59,-276 939.59,-276 939.59,-240 1076.59,-240 1076.59,-276"/>
<text text-anchor="middle" x="1008.09" y="-254.3" font-family="Inter,Helvetica,Arial" font-size="14.00">/var/run/docker.sock</text>
</g>
<!-- filebeat&#45;&gt;docker_sock -->
<g id="edge10" class="edge">
<title>filebeat&#45;&gt;docker_sock</title>
<path fill="none" stroke="#9aa0a6" stroke-dasharray="1,5" d="M372.98,-174.21C395.3,-189.93 428.9,-211.67 461.09,-225 617.21,-289.67 820.1,-280.38 929.31,-268.7"/>
<polygon fill="#9aa0a6" stroke="#9aa0a6" points="929.7,-272.18 939.26,-267.6 928.93,-265.22 929.7,-272.18"/>
<text text-anchor="middle" x="687.09" y="-280.8" font-family="Inter,Helvetica,Arial" font-size="14.00">bind ro</text>
</g>
<!-- varlog -->
<g id="node10" class="node">
<title>varlog</title>
<polygon fill="#f8f9fb" stroke="black" points="740.09,-354 737.09,-358 716.09,-358 713.09,-354 634.09,-354 634.09,-318 740.09,-318 740.09,-354"/>
<text text-anchor="middle" x="687.09" y="-332.3" font-family="Inter,Helvetica,Arial" font-size="14.00">/var/log/nginx/*</text>
</g>
<!-- filebeat&#45;&gt;varlog -->
<g id="edge9" class="edge">
<title>filebeat&#45;&gt;varlog</title>
<path fill="none" stroke="#9aa0a6" stroke-dasharray="1,5" d="M357.55,-174.19C374.89,-204.06 412.55,-261.19 461.09,-290 510.76,-319.48 576.27,-330.32 623.78,-334.19"/>
<polygon fill="#9aa0a6" stroke="#9aa0a6" points="623.71,-337.69 633.94,-334.93 624.22,-330.71 623.71,-337.69"/>
<text text-anchor="middle" x="521.09" y="-331.8" font-family="Inter,Helvetica,Arial" font-size="14.00">bind ro</text>
</g>
<!-- metricbeat -->
<g id="node6" class="node">
<title>metricbeat</title>
<path fill="#f8f9fb" stroke="black" d="M733.09,-174C733.09,-174 641.09,-174 641.09,-174 635.09,-174 629.09,-168 629.09,-162 629.09,-162 629.09,-148 629.09,-148 629.09,-142 635.09,-136 641.09,-136 641.09,-136 733.09,-136 733.09,-136 739.09,-136 745.09,-142 745.09,-148 745.09,-148 745.09,-162 745.09,-162 745.09,-168 739.09,-174 733.09,-174"/>
<text text-anchor="middle" x="687.09" y="-158.8" font-family="Inter,Helvetica,Arial" font-size="14.00">Metricbeat</text>
<text text-anchor="middle" x="687.09" y="-143.8" font-family="Inter,Helvetica,Arial" font-size="14.00">system + docker</text>
</g>
<!-- metricbeat&#45;&gt;es -->
<g id="edge3" class="edge">
<title>metricbeat&#45;&gt;es</title>
<path fill="none" stroke="black" d="M745.23,-152C803.16,-148.47 888.6,-141.84 920.09,-132 928.82,-129.27 929.71,-125.69 938.09,-122 938.18,-121.96 938.28,-121.92 938.37,-121.88"/>
<polygon fill="black" stroke="black" points="939.47,-125.21 947.36,-118.14 936.78,-118.75 939.47,-125.21"/>
<text text-anchor="middle" x="856.59" y="-151.8" font-family="Inter,Helvetica,Arial" font-size="14.00">metrics</text>
</g>
<!-- metricbeat&#45;&gt;docker_sock -->
<g id="edge11" class="edge">
<title>metricbeat&#45;&gt;docker_sock</title>
<path fill="none" stroke="#9aa0a6" stroke-dasharray="1,5" d="M745.35,-169.5C755.3,-172.2 765.52,-175.09 775.09,-178 834.64,-196.11 901.79,-219.61 948.46,-236.44"/>
<polygon fill="#9aa0a6" stroke="#9aa0a6" points="947.51,-239.82 958.1,-239.93 949.89,-233.24 947.51,-239.82"/>
<text text-anchor="middle" x="856.59" y="-228.8" font-family="Inter,Helvetica,Arial" font-size="14.00">bind ro</text>
</g>
<!-- caddy&#45;&gt;kibana -->
<g id="edge6" class="edge">
<title>caddy&#45;&gt;kibana</title>
<path fill="none" stroke="black" d="M443.33,-65.2C494.5,-60.52 556.7,-54.83 605.33,-50.39"/>
<polygon fill="black" stroke="black" points="605.85,-53.85 615.49,-49.46 605.21,-46.88 605.85,-53.85"/>
<text text-anchor="middle" x="521.09" y="-66.8" font-family="Inter,Helvetica,Arial" font-size="14.00">reverse_proxy 5601</text>
</g>
</g>
</svg>
